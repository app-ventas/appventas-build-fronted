"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7484],{7484:(Bt,D,m)=>{m.r(D),m.d(D,{ClientDetailPageModule:()=>$t});var y=m(6814),h=m(95),s=m(2912),S=m(7168),p=m(5861),Z=m(5083),x=m(6676),t=m(5678),T=m(8439),P=m(4387);function q(i,c){if(1&i){const n=t.EpF();t.TgZ(0,"ion-item")(1,"ion-checkbox",11),t.NdJ("ionChange",function(){const a=t.CHM(n).$implicit,r=t.oxw(2);return t.KtG(r.changeTransactionType(a))}),t._uU(2),t.qZA()()}if(2&i){const n=c.$implicit;t.xp6(2),t.hij(" ",n.name," ")}}function J(i,c){if(1&i&&(t.TgZ(0,"ion-list")(1,"ion-item",9)(2,"ion-label"),t._uU(3," Seleccione el tipo de transacci\xf3n a realizar "),t.qZA()(),t.YNc(4,q,3,1,"ion-item",10),t.qZA()),2&i){const n=t.oxw();t.xp6(4),t.Q6J("ngForOf",n.transactionTypes)}}function F(i,c){if(1&i&&(t.TgZ(0,"ion-select-option",17),t._uU(1),t.qZA()),2&i){const n=c.$implicit;t.Q6J("value",n.id),t.xp6(1),t.hij(" ",n.name," ")}}function I(i,c){if(1&i){const n=t.EpF();t.TgZ(0,"ion-datetime",18),t.NdJ("ionChange",function(o){t.CHM(n);const a=t.oxw(2);return t.KtG(a.closeDateTransaction(o))}),t.qZA()}}function Q(i,c){if(1&i&&(t.ynx(0),t.TgZ(1,"ion-item",9)(2,"ion-buttons")(3,"ion-label"),t._uU(4,"Monto Transacci\xf3n"),t.qZA()()(),t.TgZ(5,"ion-item",9),t._UZ(6,"ion-input",19),t.qZA(),t.BQk()),2&i){const n=t.oxw(2);t.xp6(6),t.Q6J("disabled",1==n.transactionSelect.detail)}}function N(i,c){if(1&i&&(t.TgZ(0,"ion-label",21),t._uU(1),t.qZA()),2&i){const n=t.oxw(3);t.xp6(1),t.hij("Cantidad Transacci\xf3n ",n.getQuantity()," ")}}function k(i,c){if(1&i&&(t.TgZ(0,"ion-item")(1,"ion-label"),t._uU(2),t.qZA()()),2&i){const n=t.oxw(3);t.xp6(2),t.hij("Cantidad Transacci\xf3n",n.getQuantity()," ")}}function U(i,c){if(1&i&&(t.ynx(0),t.TgZ(1,"ion-item",9)(2,"ion-buttons")(3,"ion-label"),t._uU(4),t.ALo(5,"COP"),t.qZA(),t.YNc(6,N,2,1,"ion-label",20),t.qZA()(),t.YNc(7,k,3,1,"ion-item",6),t.BQk()),2&i){const n=t.oxw(2);t.xp6(4),t.hij("Monto Transacci\xf3n ",t.lcZ(5,3,n.getTotalPrice())," "),t.xp6(2),t.Q6J("ngIf",n.isLandscape),t.xp6(1),t.Q6J("ngIf",!n.isLandscape)}}function Y(i,c){if(1&i&&(t.TgZ(0,"ion-label",21),t._uU(1),t.ALo(2,"COP"),t.qZA()),2&i){const n=t.oxw(3);t.xp6(1),t.hij(" Nuevo saldo: ",n.client?n.client.balance+n.getTotalPrice()*n.factor:t.lcZ(2,1,0)," ")}}function E(i,c){if(1&i&&(t.TgZ(0,"ion-item",22),t._uU(1),t.ALo(2,"COP"),t.YNc(3,Y,3,3,"ion-label",20),t.qZA()),2&i){const n=t.oxw(2);t.Q6J("lines",n.isLandscape?"":"none"),t.xp6(1),t.hij(" Saldo actual: ",t.lcZ(2,3,null==n.client?null:n.client.balance)," "),t.xp6(2),t.Q6J("ngIf",n.isLandscape&&n.getTotalPrice()>0)}}const L=i=>({opacity:i});function z(i,c){if(1&i&&(t.TgZ(0,"ion-item")(1,"ion-label",23),t._uU(2),t.ALo(3,"COP"),t.qZA()()),2&i){const n=t.oxw(2);t.xp6(1),t.Q6J("ngStyle",t.VKq(4,L,n.getTotalPrice()>0?"1":0)),t.xp6(1),t.hij(" Nuevo saldo : ",n.client?n.client.balance+n.getTotalPrice()*n.factor:t.lcZ(3,2,0)," ")}}function K(i,c){if(1&i){const n=t.EpF();t.TgZ(0,"ion-list")(1,"ion-item")(2,"ion-select",12),t.NdJ("ionChange",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.selectTansactionChange())}),t.YNc(3,F,2,2,"ion-select-option",13),t.qZA()(),t.TgZ(4,"ion-item",9)(5,"ion-label"),t._uU(6,"Fecha de Transacci\xf3n"),t.qZA()(),t.TgZ(7,"ion-item"),t._UZ(8,"ion-datetime-button",14),t.TgZ(9,"ion-modal",15),t.YNc(10,I,1,0,"ng-template"),t.qZA()(),t.YNc(11,Q,7,1,"ng-container",6)(12,U,8,5,"ng-container",6)(13,E,4,5,"ion-item",16)(14,z,4,6,"ion-item",6),t.qZA()}if(2&i){const n=t.oxw();t.xp6(3),t.Q6J("ngForOf",n.transactionTypes),t.xp6(6),t.Q6J("keepContentsMounted",!0),t.xp6(2),t.Q6J("ngIf",n.transactionSelect&&!n.transactionSelect.detail),t.xp6(1),t.Q6J("ngIf",1==n.transactionSelect.detail),t.xp6(1),t.Q6J("ngIf",n.client&&n.client.balance),t.xp6(1),t.Q6J("ngIf",!n.isLandscape&&n.client&&n.client.balance)}}function G(i,c){if(1&i&&(t.TgZ(0,"ion-select-option",17),t._uU(1),t.qZA()),2&i){const n=c.$implicit;t.s9C("value",n.id),t.xp6(1),t.hij(" ",n.name," ")}}function H(i,c){if(1&i){const n=t.EpF();t.TgZ(0,"ion-row",32)(1,"ion-col")(2,"ion-select",33),t.NdJ("ionChange",function(){const a=t.CHM(n).$implicit,r=t.oxw(3);return t.KtG(r.changeCaterogyDetail(a))})("ngModelChange",function(o){const r=t.CHM(n).$implicit;return t.KtG(r.productCatalogId=o)}),t.YNc(3,G,2,2,"ion-select-option",13),t.qZA()(),t.TgZ(4,"ion-col")(5,"ion-input",34),t.NdJ("ngModelChange",function(o){const r=t.CHM(n).$implicit;return t.KtG(r.units=o)}),t.qZA()(),t.TgZ(6,"ion-col")(7,"ion-input",34),t.NdJ("ngModelChange",function(o){const r=t.CHM(n).$implicit;return t.KtG(r.price=o)}),t.qZA()(),t.TgZ(8,"ion-col")(9,"ion-label",35)(10,"div"),t._uU(11),t.ALo(12,"COP"),t.qZA()()()()}if(2&i){const n=c.$implicit,e=t.oxw(3);t.xp6(2),t.Q6J("ngModel",n.productCatalogId),t.xp6(1),t.Q6J("ngForOf",e.productCatalogs),t.xp6(2),t.Q6J("ngModel",n.units),t.xp6(2),t.Q6J("ngModel",n.price),t.xp6(4),t.Oqu(t.lcZ(12,5,n.productCatalogId?n.price*n.units:0))}}function V(i,c){if(1&i&&(t.TgZ(0,"section",29)(1,"ion-row",30)(2,"ion-col"),t._uU(3,"Categor\xeda"),t.qZA(),t.TgZ(4,"ion-col"),t._uU(5,"Cantidad"),t.qZA(),t.TgZ(6,"ion-col"),t._uU(7,"Precio Unitario"),t.qZA(),t.TgZ(8,"ion-col"),t._uU(9,"Subtotal"),t.qZA()(),t.YNc(10,H,13,7,"ion-row",31),t.qZA()),2&i){const n=t.oxw(2);t.xp6(10),t.Q6J("ngForOf",n.caterogyDetails)}}function j(i,c){if(1&i){const n=t.EpF();t.TgZ(0,"ion-list",24)(1,"ion-item",9)(2,"h5")(3,"small"),t._uU(4,"Detalle de Transacci\xf3n "),t.qZA()(),t.TgZ(5,"ion-button",25),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.newDetailSales())}),t._UZ(6,"ion-icon",26),t.qZA()(),t.TgZ(7,"div",27),t.YNc(8,V,11,1,"section",28),t.qZA()()}2&i&&(t.xp6(8),t.Q6J("ngIf",!0))}function $(i,c){if(1&i){const n=t.EpF();t.TgZ(0,"ion-item",36)(1,"ion-button",37),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.submitForm())}),t._uU(2,"Registrar"),t.qZA(),t.TgZ(3,"ion-button",38),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.closeModal())}),t._uU(4,"Cancelar"),t.qZA()()}if(2&i){const n=t.oxw();t.xp6(1),t.Q6J("disabled",!n.transactionForm.valid)}}let w=(()=>{class i{constructor(n,e,o,a,r,l,g){this.formBuilder=n,this.modalCtrl=e,this.storageService=o,this.screenSizeService=a,this.apiService=r,this.deliveryService=l,this.dialogService=g,this.typeTransaction=Z.Lm.Debit,this.title="",this.amount=0,this.isLandscape=!1,this.showDateTransaction=!0,this.factor=0;const f=x();this.transactionDate=f.toDate(),this.transactionForm=this.formBuilder.group({transactionType:["",h.kI.required],transactionDate:[f.format("YYYY-MM-DD"),h.kI.required],amount:[""],units:[""]})}ngOnInit(){var n=this;return(0,p.Z)(function*(){const e=yield n.storageService.getUserAuth(),o=yield n.storageService.getTransactionTypes(e),a=yield n.storageService.getProductCatalogs(e);n.transactionTypes=o.filter(l=>l.targetType==n.typeTransaction&&(!l.product_catalog_ids||l.product_catalog_ids&&l.product_catalog_ids.some(g=>function r(l){return!!a?.find(f=>Number(f.id)===Number(l))}(g)))),1==n.transactionTypes.length&&n.changeTransactionType(n.transactionTypes[0]),n.factor=n.typeTransaction==Z.Lm.Debit?-1:1,n.isLandscape=n.screenSizeService.isLandscape,n.screenSizeService.isLandscape$.subscribe(l=>{n.isLandscape=l.isLandscape})})()}changeTransactionType(n){var e=this;return(0,p.Z)(function*(){if(e.transactionSelect=n,e.transactionForm.get("transactionType")?.setValue(n.id),0==e.transactionSelect.detail){const o=e.transactionForm.get("amount");o?.clearValidators(),o?.setValidators([h.kI.required]),o?.updateValueAndValidity()}else{e.caterogyDetails=[{productCatalogId:void 0,units:1,price:0},{productCatalogId:void 0,units:1,price:0},{productCatalogId:void 0,units:1,price:0}];const o=yield e.storageService.getUserAuth(),a=yield e.storageService.getProductCatalogs(o);e.productCatalogs=a?.filter(r=>r.transaction_type_id==e.transactionSelect?.id)}})()}selectTansactionChange(){const n=this.transactionForm.value.transactionType,e=this.transactionTypes?.filter(o=>o.id==n);e&&(console.log(e[0]),this.changeTransactionType(e[0]))}closeDateTransaction(n){const e=n.target;if(e){this.showDateTransaction=!1;const o=x(n.detail.value);this.transactionDate=o.toDate(),this.transactionForm.get("transactionDate")?.setValue(o.format("YYYY-MM-DD"));const a=e.parentNode.parentElement;a&&a.dismiss()}}submitForm(){var n=this;return(0,p.Z)(function*(){if(n.transactionForm.valid&&n.transactionSelect&&n.transactionDate&&n.client){const e=yield n.dialogService.showLoading(),o=yield n.storageService.getUserAuth();let a=yield n.storageService.getTransactions(o);a=a||[];const r=n.transactionForm.value,l=(new Date).getTime(),g=x(r.transactionDate,"YYYY-MM-DD").format("YYYY-MM-DD"),f=n.getTotalPrice()*n.factor,d={id:l,price:f,date:g,syncRequired:!0,balanceAfter:(n.client.balance||0)+f,balanceBefore:n.client.balance||0,units:n.getQuantity(),user_id:o.id,client_id:n.client?.id,transaction_type_id:n.transactionSelect?.id};if(1==n.transactionSelect.detail){const C=n.caterogyDetails?.filter(u=>u.productCatalogId&&u.productCatalogId>0);if(C){let u;d.transactionsDetails=[];for(let v=0;v<C.length;v++)u=C[v],d.transactionsDetails?.push({sequence:v+1,price:u.price,units:u.units,product_catalog_id:u.productCatalogId})}}let _=yield n.apiService.saveTransactions([d]).catch(()=>{e.dismiss()});if(_){if(e.dismiss(),_["savetx-"+d.id]){const C=_["savetx-"+d.id],u=C.insert||C.update;u&&(d.syncRequired=!1,d.id=Number(u.id),yield n.storageService.pushTransactions(o,d,l))}}else d.syncRequired=!0,yield n.storageService.pushTransactions(o,d,l);return yield n.deliveryService.orderClientTransactions(o,d.client_id),n.modalCtrl.dismiss(d,"confirm")}})()}closeModal(){var n=this;return(0,p.Z)(function*(){yield n.modalCtrl.dismiss(null,"cancel")})()}onInput(n){"monto"==n.target.parentNode.parentNode.parentNode.id&&(this.amount=n.target.value)}newDetailSales(){const n={sequence:this.transactionDetail?this.transactionDetail.length++:1,units:1,price:0};this.transactionDetail?.push(n)}getQuantity(){let n=0;if(1==this.transactionSelect?.detail&&this.caterogyDetails)for(let e of this.caterogyDetails)e.productCatalogId&&(n+=e.units);else 0==this.transactionSelect?.detail&&(n=1);return n}getTotalPrice(){if(1==this.transactionSelect?.detail){let n=0;if(this.caterogyDetails)for(let e of this.caterogyDetails)e.productCatalogId&&(n+=e.units*e.price);return n}return Number(this.amount)}changeCaterogyDetail(n){const e=this.productCatalogs?.find(o=>Number(o.id)==Number(n.productCatalogId));n.price=e&&e.price?e.price:0}static#t=this.\u0275fac=function(e){return new(e||i)(t.Y36(h.qu),t.Y36(s.IN),t.Y36(T.V1),t.Y36(T.O6),t.Y36(T.sM),t.Y36(T.pN),t.Y36(T.xA))};static#n=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-transaction-form"]],hostBindings:function(e,o){1&e&&t.NdJ("input",function(r){return o.onInput(r)})},inputs:{typeTransaction:"typeTransaction",title:"title",client:"client"},decls:13,vars:7,consts:[[3,"translucent"],[1,"ion-padding-landscape-head"],["slot","end"],[3,"click"],["slot","icon-only","name","close"],[1,"ion-padding-landscape",3,"formGroup"],[4,"ngIf"],["class","ion-padding-landscape",4,"ngIf"],["class","ion-padding-landscape ion-padding-landscape",4,"ngIf"],["lines","none"],[4,"ngFor","ngForOf"],[3,"ionChange"],["interface","popover","placeholder","","label","Tipo de Transacci\xf3n","formControlName","transactionType","label-placement","floating","fill","outline",1,"always-flip",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],["datetime","datetime"],[3,"keepContentsMounted"],[3,"lines",4,"ngIf"],[3,"value"],["presentation","date","id","datetime",3,"ionChange"],["id","monto","label","","label-placement","stacked","placeholder","$0.00","appCurrencyFormat","COP","type","number","formControlName","amount",1,"monto-input",3,"disabled"],["class","margin-left-1",4,"ngIf"],[1,"margin-left-1"],[3,"lines"],[1,"margin-top--1",3,"ngStyle"],[1,"ion-padding-landscape"],["fill","clear","size","small",1,"button-new",3,"click"],["slot","icon-only","name","add-circle-outline"],[1,"ion-padding"],["class","detail-section margin-bottom-1",4,"ngIf"],[1,"detail-section","margin-bottom-1"],[1,"detail-sales-head"],["class","detail-sales-body",4,"ngFor","ngForOf"],[1,"detail-sales-body"],["placeholder","....","interface","action-sheet",1,"detail-sales-select",3,"ngModel","ionChange","ngModelChange"],["aria-label","","type","number",1,"detail-sales-input",3,"ngModel","ngModelChange"],[1,"detail-sales-subtotal"],[1,"ion-padding-landscape","ion-padding-landscape"],["expand","block","color","primary",1,"button-submit",3,"disabled","click"],["expand","full","color","medium",1,"button-submit",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title"),t._uU(3),t.qZA(),t.TgZ(4,"ion-buttons",2)(5,"ion-button",3),t.NdJ("click",function(){return o.closeModal()}),t._UZ(6,"ion-icon",4),t.qZA()()()(),t.TgZ(7,"ion-content")(8,"form",5),t.YNc(9,J,5,1,"ion-list",6)(10,K,15,6,"ion-list",6),t.qZA(),t.YNc(11,j,9,1,"ion-list",7)(12,$,5,1,"ion-item",8),t.qZA()),2&e&&(t.Q6J("translucent",!0),t.xp6(3),t.Oqu(o.title),t.xp6(5),t.Q6J("formGroup",o.transactionForm),t.xp6(1),t.Q6J("ngIf",!o.transactionSelect),t.xp6(1),t.Q6J("ngIf",o.transactionSelect),t.xp6(1),t.Q6J("ngIf",o.transactionSelect&&1==o.transactionSelect.detail),t.xp6(1),t.Q6J("ngIf",o.transactionSelect))},dependencies:[y.sg,y.O5,y.PC,h._Y,h.JJ,h.JL,h.On,h.sg,h.u,s.YG,s.Sm,s.nz,s.wI,s.W2,s.x4,s.Mj,s.Gu,s.gu,s.pK,s.Ie,s.Q$,s.q_,s.Nd,s.t9,s.n0,s.wd,s.sr,s.ki,s.w,s.as,s.QI,P.DA],styles:["ion-select[_ngcontent-%COMP%]{padding:1rem}mat-card[_ngcontent-%COMP%]{width:100%}.monto-input[_ngcontent-%COMP%]{border:1px solid;border-radius:.5em;margin-top:.5rem;height:3rem;padding-left:1rem!important}.button-submit[_ngcontent-%COMP%]{width:100%;height:3rem}.transaction-date[_ngcontent-%COMP%]{margin:auto}.detail-sales-head[_ngcontent-%COMP%]{padding:0;font-size:80%;font-weight:700;background-color:#0000001a;height:2rem;text-align:center}.detail-sales-head[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{align-self:center}.detail-sales-body[_ngcontent-%COMP%]{font-size:80%;padding:0px .4rem}.detail-sales-body[_ngcontent-%COMP%]:last-child{border-bottom:2px solid var(--ion-color-medium)}.detail-section[_ngcontent-%COMP%]{overflow:hidden;border:1px solid var(--ion-color-medium);border-radius:10px}.detail-sales-select[_ngcontent-%COMP%]{height:2rem;border:1px solid;padding:0 0 0 11px;max-height:2rem;min-height:2rem}.detail-sales-input[_ngcontent-%COMP%]{height:2rem;max-height:2rem;min-height:2rem;border:1px solid;padding:0px 0px 0px .7rem!important}ion-select.detail-sales-select[_ngcontent-%COMP%]::part(label){margin-left:2rem!important}ion-select.detail-sales-select[_ngcontent-%COMP%]::part(placeholder){width:3.8rem}.detail-sales-subtotal[_ngcontent-%COMP%]{width:100%;display:block;border:none;height:2rem;max-height:2rem;min-height:2rem;padding:0px 0px 0px .7rem!important;text-align:right}.detail-sales-subtotal[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding-top:.5rem;margin-right:1rem}.button-new[_ngcontent-%COMP%]{margin-top:.6rem}"]})}return i})();var B=m(3546);const R=["content"],W=["trxContent"],X=["popoverTransaction"];function tt(i,c){if(1&i&&(t.TgZ(0,"ion-title"),t._uU(1),t.qZA()),2&i){const n=t.oxw();t.xp6(1),t.Oqu(n.client.name)}}function nt(i,c){1&i&&(t.TgZ(0,"ion-title"),t._UZ(1,"ion-skeleton-text",39),t.qZA()),2&i&&(t.xp6(1),t.Q6J("animated",!0))}function et(i,c){if(1&i){const n=t.EpF();t.TgZ(0,"ion-content",40)(1,"ion-list")(2,"ion-item",41),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.openModalCredit())}),t.TgZ(3,"ion-label"),t._uU(4,"Venta"),t.qZA(),t._UZ(5,"ion-icon",42),t.qZA(),t.TgZ(6,"ion-item",41),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.openModalDebit())}),t.TgZ(7,"ion-label"),t._uU(8,"Abono"),t.qZA(),t._UZ(9,"ion-icon",43),t.qZA()()()}2&i&&(t.xp6(2),t.Q6J("button",!0)("detail",!1),t.xp6(4),t.Q6J("button",!0)("detail",!1))}function it(i,c){1&i&&t._UZ(0,"ion-icon",47)}function ot(i,c){1&i&&t._UZ(0,"br")}function at(i,c){1&i&&t._UZ(0,"ion-icon",47)}function ct(i,c){if(1&i){const n=t.EpF();t.TgZ(0,"div",44),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.showDateFilter=!o.showDateFilter)}),t.TgZ(1,"span",45),t._uU(2),t.ALo(3,"Fecha"),t.YNc(4,it,1,0,"ion-icon",46),t.qZA(),t.YNc(5,ot,1,0,"br",4),t.TgZ(6,"span",45),t._uU(7),t.ALo(8,"Fecha"),t.YNc(9,at,1,0,"ion-icon",46),t.qZA()()}if(2&i){const n=t.oxw();t.xp6(2),t.AsE(" ",n.filterDateStart?"Desde ":""," ",t.lcZ(3,7,n.filterDateStart)," "),t.xp6(2),t.Q6J("ngIf",n.filterDateStart),t.xp6(1),t.Q6J("ngIf",n.isSmallScreen&&n.filterDateEnd),t.xp6(2),t.AsE(" ",n.filterDateEnd?" Hasta ":""," ",t.lcZ(8,9,n.filterDateEnd)," "),t.xp6(2),t.Q6J("ngIf",n.filterDateEnd)}}function st(i,c){if(1&i){const n=t.EpF();t.TgZ(0,"ion-datetime",55),t.NdJ("ionChange",function(o){t.CHM(n);const a=t.oxw(2);return t.KtG(a.changeDateStart(o))}),t.qZA()}}function rt(i,c){if(1&i){const n=t.EpF();t.TgZ(0,"ion-datetime",56),t.NdJ("ionChange",function(o){t.CHM(n);const a=t.oxw(2);return t.KtG(a.changeDateEnd(o))}),t.qZA()}}const M=i=>({empty:i});function lt(i,c){if(1&i){const n=t.EpF();t.TgZ(0,"ion-grid",48)(1,"ion-row")(2,"ion-col"),t._uU(3," Fecha desde "),t._UZ(4,"ion-datetime-button",49),t.TgZ(5,"ion-modal",50),t.YNc(6,st,1,0,"ng-template"),t.qZA()(),t.TgZ(7,"ion-col"),t._uU(8," Fecha hasta "),t._UZ(9,"ion-datetime-button",51),t.TgZ(10,"ion-modal",50),t.YNc(11,rt,1,0,"ng-template"),t.qZA()()(),t.TgZ(12,"ion-row")(13,"ion-col",52)(14,"ion-button",53),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.confirmDateFilter())}),t._uU(15," Filtar "),t.qZA(),t.TgZ(16,"ion-button",54),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.clearDateFilter())}),t._uU(17," Limpiar "),t.qZA()()()()}if(2&i){const n=t.oxw();t.Q6J("@fadeAnimation",void 0),t.xp6(4),t.Q6J("ngClass",t.VKq(5,M,!n.filterDateStart)),t.xp6(1),t.Q6J("keepContentsMounted",!0),t.xp6(4),t.Q6J("ngClass",t.VKq(7,M,!n.filterDateEnd)),t.xp6(1),t.Q6J("keepContentsMounted",!0)}}function dt(i,c){1&i&&t._UZ(0,"ion-icon",59)}const b=i=>({opacity:i});function _t(i,c){if(1&i){const n=t.EpF();t.TgZ(0,"ion-col",57),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.changeSort("date"))}),t.TgZ(1,"label",30)(2,"strong"),t._uU(3," Fecha"),t.qZA()(),t.TgZ(4,"div",58),t.YNc(5,dt,1,0,"ion-icon",27),t._UZ(6,"ion-icon",28),t.qZA()()}if(2&i){const n=t.oxw();t.xp6(5),t.Q6J("ngIf","date"==n.sortState.field&&"asc"==n.sortState.direction),t.xp6(1),t.Q6J("ngStyle",t.VKq(2,b,"date"==n.sortState.field&&"desc"==n.sortState.direction?"1":"0"))}}function gt(i,c){1&i&&t._UZ(0,"ion-icon",59)}function pt(i,c){if(1&i){const n=t.EpF();t.TgZ(0,"ion-col",60),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.changeSort("date"))}),t.TgZ(1,"label",61)(2,"strong"),t._uU(3," Fecha "),t.qZA()(),t.TgZ(4,"div",26),t.YNc(5,gt,1,0,"ion-icon",27),t._UZ(6,"ion-icon",28),t.qZA()()}if(2&i){const n=t.oxw();t.xp6(5),t.Q6J("ngIf","date"==n.sortState.field&&"asc"==n.sortState.direction),t.xp6(1),t.Q6J("ngStyle",t.VKq(2,b,"date"==n.sortState.field&&"desc"==n.sortState.direction?"1":"0"))}}function ut(i,c){1&i&&t._UZ(0,"ion-icon",59)}function mt(i,c){if(1&i){const n=t.EpF();t.TgZ(0,"ion-col",62),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.changeSort("transaction"))}),t.TgZ(1,"label",30)(2,"strong"),t._uU(3," Transacci\xf3n"),t.qZA(),t.TgZ(4,"div",26),t.YNc(5,ut,1,0,"ion-icon",27),t._UZ(6,"ion-icon",28),t.qZA()()()}if(2&i){const n=t.oxw();t.xp6(5),t.Q6J("ngIf","transaction"==n.sortState.field&&"asc"==n.sortState.direction),t.xp6(1),t.Q6J("ngStyle",t.VKq(2,b,"transaction"==n.sortState.field&&"desc"==n.sortState.direction?"1":"0"))}}function ft(i,c){1&i&&t._UZ(0,"ion-icon",59)}function ht(i,c){1&i&&t._UZ(0,"ion-icon",59)}function Ct(i,c){1&i&&t._UZ(0,"ion-icon",59)}function Tt(i,c){if(1&i){const n=t.EpF();t.TgZ(0,"ion-row",67),t.NdJ("click",function(){t.CHM(n);const o=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.showTransactionDetail(o))}),t.TgZ(1,"ion-col",68)(2,"span",69)(3,"strong"),t._uU(4,"Fecha: "),t.qZA()(),t._uU(5),t.ALo(6,"Fecha"),t.qZA()()}if(2&i){const n=t.oxw(2).$implicit;t.xp6(5),t.hij("",t.lcZ(6,1,n.date)," ")}}function xt(i,c){1&i&&t._UZ(0,"ion-icon",81)}const Zt=i=>({"padding-0":i});function yt(i,c){if(1&i&&(t.TgZ(0,"ion-col",64),t.YNc(1,xt,1,0,"ion-icon",80),t._uU(2),t.ALo(3,"Fecha"),t.qZA()),2&i){const n=t.oxw(2).$implicit,e=t.oxw().$implicit,o=t.oxw();t.Q6J("ngClass",t.VKq(5,Zt,o.isSmallScreen)),t.xp6(1),t.Q6J("ngIf",n.syncRequired),t.xp6(1),t.hij(" ",t.lcZ(3,3,e.date)," ")}}function bt(i,c){1&i&&t._UZ(0,"ion-icon",83)}function vt(i,c){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const n=t.oxw(3).$implicit;t.xp6(1),t.Oqu(null==n.transactionType?null:n.transactionType.name)}}function St(i,c){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const n=t.oxw(3).$implicit;t.xp6(1),t.hij("Viaje ",n.delivery&&n.delivery.description&&n.delivery.description.length>0?n.delivery.description:n.delivery.id,"")}}const Dt=(i,c)=>({"padding-left-1":i,"ion-text-start":c});function Pt(i,c){if(1&i&&(t.TgZ(0,"ion-col",75),t.YNc(1,bt,1,0,"ion-icon",82)(2,vt,2,1,"span",4)(3,St,2,1,"span",4),t.qZA()),2&i){const n=t.oxw(2).$implicit,e=t.oxw(2);t.MGl("id","table-id-",n.id,""),t.Q6J("ngClass",t.WLB(5,Dt,!e.isLandscape,!e.isLandscape)),t.xp6(1),t.Q6J("ngIf",n.syncRequired&&!e.isLandscape),t.xp6(1),t.Q6J("ngIf",!n.delivery),t.xp6(1),t.Q6J("ngIf",n.delivery)}}function wt(i,c){if(1&i&&(t.TgZ(0,"span",84),t._uU(1),t.qZA()),2&i){const n=t.oxw(2).$implicit;t.xp6(1),t.Oqu("debit"==n.transactionType.targetType?"":null==n.transactionType?null:n.transactionType.name)}}const A=i=>({"float-icon":i});function Mt(i,c){if(1&i&&t._UZ(0,"ion-icon",85),2&i){const n=t.oxw(4);t.Q6J("ngClass",t.VKq(1,A,n.isSmallScreen))}}function At(i,c){if(1&i&&t._UZ(0,"ion-icon",86),2&i){const n=t.oxw(4);t.Q6J("ngClass",t.VKq(1,A,n.isSmallScreen))}}const Ot=(i,c,n,e)=>({"padding-0":i,syncRequired:c,"negative-value":n,"row-is-clicked":e}),O=i=>({"float-field":i}),qt=i=>({"last-transaction":i}),Jt=i=>({"float-field-price":i});function Ft(i,c){if(1&i){const n=t.EpF();t.TgZ(0,"ion-item-sliding")(1,"ion-item",70),t.NdJ("click",function(){t.CHM(n);const o=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.showTransactionDetail(o))}),t.YNc(2,yt,4,7,"ion-col",71)(3,Pt,4,8,"ion-col",72)(4,wt,2,1,"span",73),t.TgZ(5,"ion-col",74)(6,"span",64),t._uU(7),t.qZA()(),t.TgZ(8,"ion-col")(9,"span",64),t._uU(10),t.ALo(11,"COP"),t.qZA()(),t.TgZ(12,"ion-col",64)(13,"span",75),t._uU(14),t.ALo(15,"COP"),t.qZA(),t.YNc(16,Mt,1,3,"ion-icon",76)(17,At,1,3,"ion-icon",77),t.qZA()(),t.TgZ(18,"ion-item-options")(19,"ion-item-option",78),t.NdJ("click",function(){t.CHM(n);const o=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.presentDeleteTransaction(o))}),t._UZ(20,"ion-icon",79),t.qZA()()()}if(2&i){const n=t.oxw().$implicit,e=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.l5B(18,Ot,e.isSmallScreen,n.syncRequired,e.isNegative(n.price),n.id==e.detailSalesSelected)),t.xp6(1),t.Q6J("ngIf",e.isLandscape),t.xp6(1),t.Q6J("ngIf",!e.isSmallScreen),t.xp6(1),t.Q6J("ngIf",e.isSmallScreen),t.xp6(2),t.Q6J("ngClass",t.VKq(23,O,e.isSmallScreen)),t.xp6(1),t.Oqu(n.units),t.xp6(2),t.Q6J("ngClass",t.VKq(25,O,e.isSmallScreen)),t.xp6(1),t.Oqu(t.lcZ(11,14,n.price)),t.xp6(2),t.Q6J("ngClass",t.VKq(27,qt,e.lastTrx==n.id)),t.xp6(1),t.MGl("id","trx-last-",n.id,""),t.Q6J("ngClass",t.VKq(29,Jt,e.isSmallScreen)),t.xp6(1),t.hij(" ",t.lcZ(15,16,n.balanceAfter)," "),t.xp6(2),t.Q6J("ngIf",!e.isNegative(n.price)),t.xp6(1),t.Q6J("ngIf",e.isNegative(n.price))}}function It(i,c){if(1&i&&(t.TgZ(0,"ion-row",90)(1,"ion-col"),t._uU(2),t.qZA(),t.TgZ(3,"ion-col"),t._uU(4),t.qZA(),t.TgZ(5,"ion-col"),t._uU(6),t.ALo(7,"COP"),t.qZA(),t.TgZ(8,"ion-col"),t._uU(9),t.ALo(10,"COP"),t.qZA()()),2&i){const n=c.$implicit;t.xp6(2),t.hij(" ",null==n.productCatalog?null:n.productCatalog.name," "),t.xp6(2),t.hij(" ",n.units," "),t.xp6(2),t.hij(" ",t.lcZ(7,4,n.price)," "),t.xp6(3),t.hij(" ",t.lcZ(10,6,n.units*n.price)," ")}}function Qt(i,c){if(1&i&&(t.TgZ(0,"section",87)(1,"ion-row",88)(2,"ion-col"),t._uU(3,"Categor\xeda"),t.qZA(),t.TgZ(4,"ion-col"),t._uU(5,"Cantidad"),t.qZA(),t.TgZ(6,"ion-col"),t._uU(7,"Precio Unitario"),t.qZA(),t.TgZ(8,"ion-col"),t._uU(9,"Subtotal"),t.qZA()(),t.YNc(10,It,11,8,"ion-row",89),t.qZA()),2&i){const n=t.oxw().$implicit;t.Q6J("@fadeAnimation",void 0),t.xp6(10),t.Q6J("ngForOf",n.transactionsDetails)}}const Nt=i=>({"font-size":i});function kt(i,c){if(1&i&&(t.TgZ(0,"div",64),t.YNc(1,Tt,7,3,"ion-row",65)(2,Ft,21,31,"ion-item-sliding",4)(3,Qt,11,2,"section",66),t.qZA()),2&i){const n=c.$implicit,e=c.index,o=t.oxw(2);t.Q6J("@slideInAnimation",void 0)("@slideOutAnimation",void 0)("ngClass",t.VKq(6,Nt,!o.isLandscape)),t.xp6(1),t.Q6J("ngIf",!o.isLandscape&&0==e),t.xp6(1),t.Q6J("ngIf",n.transactionType),t.xp6(1),t.Q6J("ngIf",n.transactionsDetails&&n.transactionsDetails.length>0&&o.detailSalesSelected==n.id)}}function Ut(i,c){if(1&i&&(t.ynx(0),t.YNc(1,kt,4,8,"div",63),t.BQk()),2&i){const n=c.$implicit;t.xp6(1),t.Q6J("ngForOf",n.transactions)}}function Yt(i,c){1&i&&(t.TgZ(0,"label"),t._uU(1," No hay datos para el cliente "),t.qZA())}function Et(i,c){1&i&&(t.TgZ(0,"label"),t._uU(1," No hay datos para el cliente para estas fechas "),t.qZA())}function Lt(i,c){if(1&i&&(t.TgZ(0,"ion-row",91),t.YNc(1,Yt,2,0,"label",4)(2,Et,2,0,"label",4),t.qZA()),2&i){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",!n.filterDateEnd&&!n.filterDateStart),t.xp6(1),t.Q6J("ngIf",n.filterDateEnd||n.filterDateStart)}}function zt(i,c){1&i&&(t.TgZ(0,"ion-list",92)(1,"ion-item")(2,"ion-label"),t._UZ(3,"ion-skeleton-text",39),t.qZA()(),t.TgZ(4,"ion-item")(5,"ion-label"),t._UZ(6,"ion-skeleton-text",39),t.qZA()()()),2&i&&(t.xp6(3),t.Q6J("animated",!0),t.xp6(3),t.Q6J("animated",!0))}const Kt=i=>({"justify-content-center":i}),Gt=()=>({height:"100%"}),Ht=[{path:"",component:(()=>{class i{constructor(n,e,o,a,r,l,g,f,d){this.activatedRoute=n,this.deliveryService=e,this.storageService=o,this.screenSizeService=a,this.dialogService=r,this.modalController=l,this.toastController=g,this.apiService=f,this.redirectService=d,this.transactionsOri=[],this.dataTransactionsCss=[],this.sortState={field:"date",direction:"asc"},this.detailSalesSelected=0,this.isLandscape=!1,this.isSmallScreen=!1,this.showDateFilter=!1,this.filterDate="",this.isOpen=!1,this.height=0,this.loading=!0}ionViewDidEnter(){var n=this;return(0,p.Z)(function*(){n.loading=!0,n.redirectService.routerNameChange("tabs/client-detail");const e=yield n.dialogService.showLoading();n.userAuth=yield n.storageService.getUserAuth(),n.isLandscape=n.screenSizeService.isLandscape,n.isSmallScreen=window.innerWidth<520,n.screenSizeService.isLandscape$.subscribe(o=>{n.isLandscape=o.isLandscape,n.isSmallScreen=window.innerWidth<520}),n.activatedRoute.queryParams.subscribe(function(){var o=(0,p.Z)(function*(a){n.clientId=a.clientId,n.clientId&&(n.clientId=Number(n.clientId),yield n.initializeTransactionList(),setTimeout(()=>{n.loading=!1,e.dismiss()},1e3))});return function(a){return o.apply(this,arguments)}}())})()}initializeTransactionList(){var n=this;return(0,p.Z)(function*(){n.transactionTypes=yield n.storageService.getTransactionTypes(n.userAuth);const e=yield n.storageService.getClients(n.userAuth);n.client=e.find(o=>o.id==n.clientId),n.transactionsOri=yield n.deliveryService.getTransactionsByClient(n.clientId),yield n.renderSort(),n.transactionsOri&&n.transactionsOri.length>0&&(n.lastTrx=n.transactionsOri[n.transactionsOri.length-1].id),yield n.setDataTransactionsCss(n.transactionsOri),setTimeout(()=>{n.content?.scrollToBottom(300)},1e3)})()}getTotalCost(){return this.client?.balance}isNegative(n){return n<0}showTransactionDetail(n){this.detailSalesSelected=this.detailSalesSelected==n.id?0:n.id}subTotalTransactionDetail(n){return Number(n.price)*Number(n.units)}changeSort(n){this.sortState.field==n?""==this.sortState.direction?this.sortState.direction="desc":"desc"==this.sortState.direction?this.sortState.direction="asc":"asc"==this.sortState.direction&&(this.sortState.direction="desc"):(this.sortState.field=n,this.sortState.direction="desc"),this.renderSort()}renderSort(){const{direction:n,field:e}=this.sortState;""==n&&(this.sortState={field:"date",direction:"asc"}),this.transactionsOri.sort((a,r)=>{if("date"===e){const l=x(a.date,"YYYY-MM-DD"),g=x(r.date,"YYYY-MM-DD");if("asc"===n)return a.date==r.date?a.id-r.id:l.isAfter(g)?1:-1;if("desc"===n)return a.date==r.date?r.id-a.id:g.isAfter(l)?1:-1}else{if("price"===e||"units"===e||"balanceAfter"===e)return"asc"===n?a[e]-r[e]:r[e]-a[e];if("transaction"===e)return"asc"===n?a.transactionType?.name.localeCompare(r.transactionType.name):r.transactionType?.name.localeCompare(a.transactionType.name)}}),this.setDataTransactionsCss(this.transactionsOri)}setDataTransactionsCss(n){var e=this;return(0,p.Z)(function*(){const o=yield e.storageService.getDeliveries(e.userAuth);e.dataTransactionsCss=[];for(let a of n){const r=e.dataTransactionsCss.findIndex(l=>l.date==a.date);-1!==r?e.dataTransactionsCss[r].transactions?.push({...a,delivery:o?.find(l=>l.id==a.delivery_id)}):e.dataTransactionsCss.push({date:a.date,transactions:[{...a,delivery:o?.find(l=>l.id==a.delivery_id)}]})}})()}pushDataTransactionCss(n){const e=this.dataTransactionsCss.findIndex(o=>o.date==n.date);-1!==e?(this.dataTransactionsCss[e].transactions=this.dataTransactionsCss[e].transactions||[],this.dataTransactionsCss[e].transactions.push(n)):this.dataTransactionsCss.push({date:n.date,transactions:[n]})}confirmDateFilter(){var n=this;return(0,p.Z)(function*(){const e=yield n.dialogService.showLoading();yield n.renderSort();const o=n.transactionsOri?.filter(a=>{if(n.filterDateStart){const r=x(a.date,"YYYY-MM-DD"),l=x(n.filterDateStart);if(n.filterDateEnd){const g=x(n.filterDateEnd);return r>=l&&r<=g}return r>=l}return!0});n.setDataTransactionsCss(o),e.dismiss(),n.showDateFilter=!1})()}clearDateFilter(){this.filterDateEnd=void 0,this.filterDateStart=void 0,this.confirmDateFilter(),this.showDateFilter=!1}openModalDebit(){var n=this;return(0,p.Z)(function*(){n.closePopover();const e=yield n.modalController.create({component:w,componentProps:{typeTransaction:Z.Lm.Debit,title:"Transacci\xf3n de abono",client:n.client},cssClass:"modal-transaction-form"});yield e.present();const{data:o}=yield e.onDidDismiss();o&&n.addTransacction(o)})()}openModalCredit(){var n=this;return(0,p.Z)(function*(){n.closePopover();const e=yield n.modalController.create({component:w,componentProps:{typeTransaction:Z.Lm.Credit,title:"Transacci\xf3n de venta",client:n.client},cssClass:"modal-transaction-form"});yield e.present();const{data:o}=yield e.onDidDismiss();o&&n.addTransacction(o)})()}addTransacction(n){var e=this;return(0,p.Z)(function*(){e.initializeTransactionList(),e.presentToast("bottom","Registro adicionado exit\xf3samente"),setTimeout(()=>{e.detailSalesSelected=0,e.showTransactionDetail(n)},400);const o=n.client_id;yield e.deliveryService.orderClientTransactions(e.userAuth,o);const a=yield e.storageService.getClients(e.userAuth);e.client=a?.find(r=>r.id==e.clientId)})()}updateAllTransaction(){var n=this;return(0,p.Z)(function*(){n.transactionsOri=yield n.deliveryService.getTransactionsByClient(n.clientId);for(let e=0;e<n.dataTransactionsCss.length;e++){const o=n.dataTransactionsCss[e];if(o.transactions)for(let a=0;a<o.transactions.length;a++){const r=o.transactions[a];for(let l of n.transactionsOri)l.id==r.id&&(o.transactions[a]=l)}}})()}closeModalPlay(){this.modalController.dismiss()}presentToast(n,e){var o=this;return(0,p.Z)(function*(){yield(yield o.toastController.create({message:e,duration:1500,position:n})).present()})()}presentPopoverAction(n){this.popoverTransaction&&(this.popoverTransaction.event=n),this.isOpen=!0}closePopover(){this.popoverTransaction&&this.popoverTransaction.dismiss()}showElementInTable(n){if(this.content){document.getElementById(`table-id-${n.id}`);const a=document.getElementsByClassName("last-transaction");console.log(a.item)}}changeDateStart(n){const e=n.target;if(e){const o=x(n.detail.value);this.filterDateStart=o.toDate();const a=e.parentNode.parentElement;a&&a.dismiss()}}changeDateEnd(n){const e=n.target;if(e){const o=x(n.detail.value);this.filterDateEnd=o.toDate();const a=e.parentNode.parentElement;a&&a.dismiss()}}scrollToBottom(){const n=document.querySelector(".last-transaction"),e=document.querySelector("#content"),o=document.querySelector(".body-container"),a=document.querySelector(".last-transaction");if(n&&e&&o&&a){const f=n.getBoundingClientRect().top-e.scrollTop;if(o&&a){var r=a.getBoundingClientRect(),l=window.pageYOffset||document.documentElement.scrollTop;let d=o.scrollHeight;d=r.top+l-o.scrollHeight,this.content?.scrollToPoint(0,this.transactionsOri.length<6?d:f,500)}}}presentDeleteTransaction(n){var o,e=this;this.dialogService.showAlert({header:"\xbfSeguro que desea eliminar esta transacci\xf3n?",subHeader:n.delivery_id?"Esta transacci\xf3n hace parte de un viaje":n.transactionType?.name,message:"Valor de la transacci\xf3n "+(0,Z.gq)(n.price),buttons:[{text:"Cancelar",cssClass:"alert-button-cancel",role:"cancel",handler:()=>{}},{text:"Borrar",cssClass:"alert-delete-confirm",handler:(o=(0,p.Z)(function*(){e.removeTransaction(n)}),function(){return o.apply(this,arguments)})}]})}removeTransaction(n){var e=this;return(0,p.Z)(function*(){n.syncRequired=!0;const o=yield e.dialogService.showLoading(),a=yield e.apiService.removeTransactions([n]).catch(_=>{console.log(_),e.dialogService.showMessage(JSON.stringify(_))});if(a){const _=a["removeTrx-"+n.id];_&&_.rowsDeleted>0?n.syncRequired=!1:e.exceptionFinish("TODO: Pendiente validar escenario de eliminaci\xf3n")}const r=yield e.storageService.getTransactions(e.userAuth);let l=r?.findIndex(_=>_.id===n.id);r&&-1!==l&&(r?.splice(l,1),yield e.storageService.setTransactions(e.userAuth,r)),yield e.storageService.pushTransactionsPending(e.userAuth,n,n.id);const g=n.client_id;yield e.deliveryService.orderClientTransactions(e.userAuth,g),yield e.updateAllTransaction();const f=yield e.storageService.getClients(e.userAuth);e.client=f?.find(_=>_.id==e.clientId),(0,Z.gq)(n.price);for(let _=0;_<e.dataTransactionsCss.length;_++){const C=e.dataTransactionsCss[_];if(C.transactions)for(let u=0;u<C.transactions.length;u++)C.transactions[u].id==n.id&&C.transactions.splice(u,1),0==C.transactions.length&&e.dataTransactionsCss.splice(_,1)}yield e.initializeTransactionList(),o.dismiss()})()}exceptionFinish(n,e){this.dialogService.showAlert({subHeader:n,buttons:[{text:"Aceptar",cssClass:"alert-button-cancel",role:"cancel",handler:()=>{}}]})}static#t=this.\u0275fac=function(e){return new(e||i)(t.Y36(S.gz),t.Y36(T.pN),t.Y36(T.V1),t.Y36(T.O6),t.Y36(T.xA),t.Y36(s.IN),t.Y36(s.yF),t.Y36(T.sM),t.Y36(T.VH))};static#n=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-client-detail"]],viewQuery:function(e,o){if(1&e&&(t.Gf(R,7),t.Gf(W,7),t.Gf(s.ki,5),t.Gf(X,5)),2&e){let a;t.iGM(a=t.CRH())&&(o.content=a.first),t.iGM(a=t.CRH())&&(o.trxContent=a.first),t.iGM(a=t.CRH())&&(o.modal=a.first),t.iGM(a=t.CRH())&&(o.popoverTransaction=a.first)}},decls:60,vars:35,consts:[[3,"translucent"],[1,"ion-padding-landscape-head"],["slot","start"],["text","","icon","caret-back","defaultHref","tabs/tab1"],[4,"ngIf"],["slot","end"],["fill","clear","size","small",3,"click"],["slot","icon-only","name","add-circle-outline"],[3,"isOpen","didDismiss"],["popoverTransaction",""],["color","light","id","content",1,"ion-padding",3,"fullscreen"],["content",""],[1,"display-flex","color-gray","ion-padding-landscape","margin-left-1","margin-top-1","capa-size-h"],[1,"margin-right-1",3,"click"],["name","funnel-outline",1,"filter-icon"],[1,"margin-top-03",3,"name"],["class","filter-result",3,"click",4,"ngIf"],["class","container-filter capa-size-h ion-padding-landscape",4,"ngIf"],[1,"table","margin-top-1","padding-0","ion-padding-landscape",3,"fixed"],[1,"row-head","background-color-light-blue","capa-size-h","sticky"],["class","display-flex","size","3",3,"click",4,"ngIf"],["id","div-0",1,"row-head","background-color-light-blue","border-bottom","capa-size-h","sticky"],["class","display-flex",3,"click",4,"ngIf"],["id","trx",3,"click",4,"ngIf"],["size","2",3,"click"],[1,"column-sort",3,"ngClass"],[1,"icon-sort"],["name","caret-up-outline",4,"ngIf"],["name","caret-down-outline",3,"ngStyle"],[3,"click"],[1,"column-sort","justify-content-center"],[1,"body-container",3,"ngStyle"],["trxContent",""],[4,"ngFor","ngForOf"],["class","padding-2",4,"ngIf"],[1,"row-foot","background-color-light-blue"],[1,"foot-cell-start"],["size","auto",1,"margin-right-2"],["class","ion-padding-landscape",4,"ngIf"],[2,"width","80%",3,"animated"],[1,"ion-padding"],[3,"button","detail","click"],["slot","end","name","wallet-outline"],["slot","end","name","cash-outline"],[1,"filter-result",3,"click"],[1,"margin-left-1"],["name","calendar-outline",4,"ngIf"],["name","calendar-outline"],[1,"container-filter","capa-size-h","ion-padding-landscape"],["datetime","datetime-start",3,"ngClass"],[3,"keepContentsMounted"],["datetime","datetime-end",3,"ngClass"],[1,"ion-text-end","padding-0"],["size","small","fill","outline","color","primary",1,"clear-date-filter","margin-left-auto",3,"click"],["size","small","fill","outline","color","medium",1,"clear-date-filter","margin-left-1",3,"click"],["color","rose","presentation","date","id","datetime-start",3,"ionChange"],["color","rose","presentation","date","id","datetime-end",3,"ionChange"],["size","3",1,"display-flex",3,"click"],[1,"icon-sort","display-flex"],["name","caret-up-outline"],[1,"display-flex",3,"click"],[1,"column-sort","justify-content-center","margin-left-2"],["id","trx",3,"click"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["class","row-body float-row","id","div-1",3,"click",4,"ngIf"],["class","detail-section",4,"ngIf"],["id","div-1",1,"row-body","float-row",3,"click"],[1,"no-padding","transaction-date"],[1,"bold"],["id","div-2","lines","none",1,"row-body","padding-end","border-bottom",3,"ngClass","click"],[3,"ngClass",4,"ngIf"],[3,"id","ngClass",4,"ngIf"],["class","float-name",4,"ngIf"],["size","2"],[3,"id","ngClass"],["name","arrow-up-outline","class","red",3,"ngClass",4,"ngIf"],["name","arrow-down-outline","class","green",3,"ngClass",4,"ngIf"],["color","danger",3,"click"],["name","trash-outline"],["name","alert-circle-outline","class","warning",4,"ngIf"],["name","alert-circle-outline",1,"warning"],["name","alert-circle-outline","class","warning no-landscape",4,"ngIf"],["name","alert-circle-outline",1,"warning","no-landscape"],[1,"float-name"],["name","arrow-up-outline",1,"red",3,"ngClass"],["name","arrow-down-outline",1,"green",3,"ngClass"],[1,"detail-section"],[1,"detail-sales-head"],["class","detail-sales-body",4,"ngFor","ngForOf"],[1,"detail-sales-body"],[1,"padding-2"],[1,"ion-padding-landscape"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),t._UZ(3,"ion-back-button",3),t.qZA(),t.YNc(4,tt,2,1,"ion-title",4)(5,nt,2,1,"ion-title",4),t.TgZ(6,"ion-buttons",5)(7,"ion-button",6),t.NdJ("click",function(r){return o.presentPopoverAction(r)}),t._UZ(8,"ion-icon",7),t.qZA(),t.TgZ(9,"ion-popover",8,9),t.NdJ("didDismiss",function(){return o.isOpen=!1}),t.YNc(11,et,10,4,"ng-template"),t.qZA()()()(),t.TgZ(12,"ion-content",10,11)(14,"div",12)(15,"div",13),t.NdJ("click",function(){return o.showDateFilter=!o.showDateFilter}),t._UZ(16,"ion-icon",14)(17,"ion-icon",15),t.qZA(),t.YNc(18,ct,10,11,"div",16),t.qZA(),t.YNc(19,lt,18,9,"ion-grid",17),t.TgZ(20,"ion-grid",18)(21,"ion-row",19),t.YNc(22,_t,7,4,"ion-col",20),t.qZA(),t.TgZ(23,"ion-row",21),t.YNc(24,pt,7,4,"ion-col",22)(25,mt,7,4,"ion-col",23),t.TgZ(26,"ion-col",24),t.NdJ("click",function(){return o.changeSort("units")}),t.TgZ(27,"label",25)(28,"strong"),t._uU(29," Cantidad"),t.qZA(),t.TgZ(30,"div",26),t.YNc(31,ft,1,0,"ion-icon",27),t._UZ(32,"ion-icon",28),t.qZA()()(),t.TgZ(33,"ion-col",29),t.NdJ("click",function(){return o.changeSort("price")}),t.TgZ(34,"label",30)(35,"strong"),t._uU(36,"Precio"),t.qZA(),t.TgZ(37,"div",26),t.YNc(38,ht,1,0,"ion-icon",27),t._UZ(39,"ion-icon",28),t.qZA()()(),t.TgZ(40,"ion-col",29),t.NdJ("click",function(){return o.changeSort("balanceAfter")}),t.TgZ(41,"label",30)(42,"strong"),t._uU(43,"Saldo"),t.qZA(),t.TgZ(44,"div",26),t.YNc(45,Ct,1,0,"ion-icon",27),t._UZ(46,"ion-icon",28),t.qZA()()()(),t.TgZ(47,"ion-list",31,32),t.YNc(49,Ut,2,1,"ng-container",33),t.qZA(),t.YNc(50,Lt,3,2,"ion-row",34),t.TgZ(51,"ion-row",35)(52,"ion-col",36)(53,"strong"),t._uU(54,"Saldo a la fecha"),t.qZA()(),t.TgZ(55,"ion-col",37)(56,"strong"),t._uU(57),t.ALo(58,"COP"),t.qZA()()()(),t.YNc(59,zt,7,2,"ion-list",38),t.qZA()),2&e&&(t.Q6J("translucent",!0),t.xp6(4),t.Q6J("ngIf",o.client),t.xp6(1),t.Q6J("ngIf",!o.client),t.xp6(4),t.Q6J("isOpen",o.isOpen),t.xp6(3),t.Q6J("fullscreen",!0),t.xp6(5),t.Q6J("name",o.showDateFilter?"caret-down-outline":"caret-forward-outline"),t.xp6(1),t.Q6J("ngIf",!o.showDateFilter),t.xp6(1),t.Q6J("ngIf",o.showDateFilter),t.xp6(1),t.Q6J("fixed",!0),t.xp6(2),t.Q6J("ngIf",!o.isLandscape),t.xp6(2),t.Q6J("ngIf",o.isLandscape),t.xp6(1),t.Q6J("ngIf",!o.isSmallScreen),t.xp6(2),t.Q6J("ngClass",t.VKq(26,Kt,o.isLandscape)),t.xp6(4),t.Q6J("ngIf","units"==o.sortState.field&&"asc"==o.sortState.direction),t.xp6(1),t.Q6J("ngStyle",t.VKq(28,b,"units"==o.sortState.field&&"desc"==o.sortState.direction?"1":"0")),t.xp6(6),t.Q6J("ngIf","price"==o.sortState.field&&"asc"==o.sortState.direction),t.xp6(1),t.Q6J("ngStyle",t.VKq(30,b,"price"==o.sortState.field&&"desc"==o.sortState.direction?"1":"0")),t.xp6(6),t.Q6J("ngIf","balanceAfter"==o.sortState.field&&"asc"==o.sortState.direction),t.xp6(1),t.Q6J("ngStyle",t.VKq(32,b,"balanceAfter"==o.sortState.field&&"desc"==o.sortState.direction?"1":"0")),t.xp6(1),t.Q6J("ngStyle",t.DdM(34,Gt)),t.xp6(2),t.Q6J("ngForOf",o.dataTransactionsCss),t.xp6(1),t.Q6J("ngIf",0==(null==o.dataTransactionsCss?null:o.dataTransactionsCss.length)),t.xp6(7),t.Oqu(t.lcZ(58,24,o.getTotalCost())),t.xp6(2),t.Q6J("ngIf",o.loading))},dependencies:[y.mk,y.sg,y.O5,y.PC,s.oU,s.YG,s.Sm,s.wI,s.W2,s.x4,s.Mj,s.jY,s.Gu,s.gu,s.Ie,s.u8,s.IK,s.td,s.Q$,s.q_,s.Nd,s.CK,s.wd,s.sr,s.ki,s.d8,s.QI,s.cs,P.DA,B.E],styles:['@charset "UTF-8";.header-back-button[_ngcontent-%COMP%]{width:3.5rem}.header-content[_ngcontent-%COMP%]{position:absolute;z-index:100;left:3rem;top:0;width:100%}.filter-col[_ngcontent-%COMP%]{padding:0;margin:0}.table[_ngcontent-%COMP%]{background-color:var(--mat-table-background-color, #fff);width:100%;color:#000000de;box-shadow:0 3px 14px 2px #0000001f}.row-head[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:.5rem}.row-body[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%], .row-foot[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:1rem .5rem}.row-body.padding-0[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%], .row-foot.padding-0[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:1rem 0rem}.no-padding[_ngcontent-%COMP%]{padding:.4rem 0 0!important}.row-head[_ngcontent-%COMP%]{font-size:.9rem;font-weight:700;color:#000000c2}.column-sort[_ngcontent-%COMP%]{display:flex}.row-body[_ngcontent-%COMP%]{font-size:.9rem;text-align:center}.foot-cell-start[_ngcontent-%COMP%]{text-align:left;padding-left:1rem!important}.row-foot[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.12);position:sticky;top:0;bottom:0;color:#000000de;z-index:10;background-color:#fff;box-shadow:1px 48px #ddebf7;font-size:1rem}.negative-value[_ngcontent-%COMP%]{color:#216f40;font-weight:500;--background: rgba(45, 255, 88, .1)}.syncRequired[_ngcontent-%COMP%]{border:2px dashed rgba(255,202,34,.5)!important}.syncRequired.negative-value[_ngcontent-%COMP%]{color:#216f40}.row-is-clicked[_ngcontent-%COMP%]{--background: rgb(207, 60, 79, .8);color:var(--ion-color-danger-contrast);border-bottom:1px solid #e77a88}.row-is-clicked.negative-value[_ngcontent-%COMP%]{color:#216f40;font-weight:500;--background: rgb(45 255 88 / 40%)}.icon-sort[_ngcontent-%COMP%]{padding-top:.1rem;margin-left:.3rem}.detail-sales-head[_ngcontent-%COMP%]{padding:0;font-size:80%;font-weight:700;background-color:#0000001a;text-align:center}.detail-sales-body[_ngcontent-%COMP%]{font-size:80%;padding:0px .4rem;text-align:center}.detail-sales-body[_ngcontent-%COMP%]:last-child{border-bottom:2px solid var(--ion-color-danger-shade)}.detail-section[_ngcontent-%COMP%]{overflow:hidden;border-left:3px solid var(--ion-color-danger-shade)}.container-filter[_ngcontent-%COMP%]{padding:1rem;border:1px solid;margin:0rem 1rem;border-radius:1rem}.container-filter[_ngcontent-%COMP%]:before{content:"Filtros";position:absolute;top:5rem;left:50%;background-color:var(--ion-color-light, #f4f5f8)!important;padding-left:2rem;padding-right:2rem;transform:translate(-45%)}.filter-icon[_ngcontent-%COMP%]{font-size:1.4rem}.filter-result[_ngcontent-%COMP%]{margin-top:.3rem}mat-hint[_ngcontent-%COMP%]{font-size:.8rem}mat-form-field[_ngcontent-%COMP%]{width:11rem}.button-new[_ngcontent-%COMP%]{position:absolute;left:calc(100% - 5rem);top:2.5rem;font-size:1.25rem}.float-row[_ngcontent-%COMP%]{height:1.7rem;padding-top:0;padding-bottom:1.5rem;margin:0;text-align:left}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.12)}.bold[_ngcontent-%COMP%]{font-weight:700}@media only screen and (max-width: 480px){.font-size[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{font-size:78%!important}}.last-transaction[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border:1px solid;padding:.4rem;border-radius:.5rem}.transaction-date[_ngcontent-%COMP%]{background-color:#d3d3f24d;padding:.4rem!important}.red[_ngcontent-%COMP%]{color:red}.green[_ngcontent-%COMP%]{color:green}.red[_ngcontent-%COMP%], .green[_ngcontent-%COMP%]{position:absolute;right:-.2rem;top:1rem}@media only screen and (min-width: 598px){.red[_ngcontent-%COMP%], .green[_ngcontent-%COMP%]{right:.8rem}}.warning[_ngcontent-%COMP%]{color:orange;position:absolute;left:1rem}.warning.no-landscape[_ngcontent-%COMP%]{left:-.1rem}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.transicion-opacidad[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn 30s ease-in-out}.row-body.padding-end[_ngcontent-%COMP%]{--padding-end: .4rem;--padding-start: 0px;--inner-padding-start: 0px;--inner-padding-end: 0px}.float-name[_ngcontent-%COMP%]{position:absolute;top:.3rem;left:1rem}.float-field[_ngcontent-%COMP%]{position:absolute;top:1rem;width:100%;left:0rem}.float-field-price[_ngcontent-%COMP%]{position:absolute;top:1rem;width:94%;left:0rem}.last-transaction[_ngcontent-%COMP%]   .float-field-price[_ngcontent-%COMP%]{top:0rem!important;width:90%!important}.last-transaction[_ngcontent-%COMP%]   ion-icon.float-icon[_ngcontent-%COMP%]{top:.5rem}'],data:{animation:[Z.qy,Z.JN,Z.F2]}})}return i})()}];let Vt=(()=>{class i{static#t=this.\u0275fac=function(e){return new(e||i)};static#n=this.\u0275mod=t.oAB({type:i});static#e=this.\u0275inj=t.cJS({imports:[S.Bz.forChild(Ht),S.Bz]})}return i})();var jt=m(8434);let $t=(()=>{class i{static#t=this.\u0275fac=function(e){return new(e||i)};static#n=this.\u0275mod=t.oAB({type:i});static#e=this.\u0275inj=t.cJS({imports:[y.ez,h.u5,h.UX,s.Pc,jt.K,Vt]})}return i})()}}]);